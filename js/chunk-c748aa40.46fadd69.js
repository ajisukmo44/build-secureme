(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c748aa40"],{5031:function(t,e,s){},"543b":function(t,e,s){"use strict";var a=s("5031"),n=s.n(a);n.a},d189:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",[a("PageHeader",{attrs:{title:t.title,items:t.items}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card"},[t.loading?a("div",{staticClass:"card-body"},[a("div",{staticClass:"row mt-5 mb-5 pb-4 mx-auto"},[a("div",{staticClass:"col-12 p-5 m-4 text-center"},[t.loading?a("div",{staticClass:"spinner-border text-secondary",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading..")])]):t._e()])])]):t._e(),t.tableData[0]||t.loading?t._e():a("div",{staticClass:"card-body"},[a("div",{staticClass:"row  mt-5 mb-5 pb-4 mx-auto"},[a("div",{staticClass:"col-12  p-5 my-5 text-center"},[a("span",{staticClass:"text-secondary"},[t._v(t._s(t.$t("all.dnf")))])])])]),t.tableData[0]&&!t.loading?a("div",{staticClass:"card-body"},[a("div",{staticClass:"row mb-0"},[a("div",{staticClass:"col-5 col-xl-7"},[a("div",{},[a("b-dropdown",{staticClass:"btn-group mr-2 mb-2 mb-sm-0 border",attrs:{variant:"white"}},[a("template",{slot:"button-content"},[t._v(" "+t._s(t.$t("table.show-label"))+" "),a("i",{staticClass:"mdi mdi-chevron-down ml-2"})]),t._l(t.pageOptions,(function(e){return a("span",{key:e},[a("button",{staticClass:"dropdown-item",on:{click:function(s){return t.perPageSelect(e)}}},[e==t.perPage?a("span",{staticClass:"text-success"},[a("b",[t._v(" "+t._s(e)+" ")])]):a("span",[t._v(t._s(e))])])])}))],2),t.selected[0]?a("b-dropdown",{staticClass:"btn-group mr-2 mb-2 mb-sm-0 border",attrs:{variant:"white"}},["su"==t.user_type||"adm"==t.user_type?a("template",{slot:"button-content"},[t._v(" "+t._s(t.$t("button.bulk-action"))+" "),a("i",{staticClass:"mdi mdi-chevron-down ml-2"})]):t._e(),a("button",{staticClass:"dropdown-item",on:{click:function(e){return t.bulkAction()}}},[t._v(t._s(t.$t("button.hapus.text")))])],2):t._e()],1)]),a("div",{staticClass:"col-4 col-xl-3"}),a("div",{staticClass:"col-3 col-xl-2"},[a("div",{staticClass:"form-group has-search"},[a("span",{staticClass:"bx bx-search-alt search-icon form-control-feedback"}),a("b-form-input",{staticClass:"form-control",attrs:{type:"search",placeholder:t.$t("navbar.search.text")},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)])]),a("div",{staticClass:"table-responsive mb-0"},[a("b-table",{attrs:{items:t.tableData,fields:t.fields,bordered:"",striped:"",responsive:"sm","per-page":t.perPage,"current-page":t.currentPage,"sort-desc":t.sortDesc,filter:t.filter,"filter-included-fields":t.filterOn},on:{"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"head(bulk)",fn:function(){return[a("b-form-checkbox",{staticClass:"text-center mt-0",on:{change:t.select},model:{value:t.selectAll,callback:function(e){t.selectAll=e},expression:"selectAll"}})]},proxy:!0},{key:"cell(bulk)",fn:function(e){return[a("b-form-checkbox",{staticClass:"text-center mt-2",attrs:{value:e.item.id_customer},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})]}},{key:"cell(customer)",fn:function(e){return[a("div",{staticClass:"col-sm-12"},[e.item.account?a("div",{staticClass:"media"},["default_pict.png"==e.item.account.profile_pict?a("img",{staticClass:"mr-3 rounded-circle avatar-sm",attrs:{src:s("4b9b"),alt:"user-pic"}}):a("img",{staticClass:"mr-3 rounded-circle avatar-sm",attrs:{src:t.urlImage+e.item.account.profile_pict,alt:"user-pic"}}),a("div",{staticClass:"media-body"},[t._v(" "+t._s(e.item.account.name)+" "),e.item.is_banned?a("span",{staticClass:"text-danger ml-1",attrs:{title:"is banned"}},[a("i",{staticClass:"fas fa-times px-0"})]):t._e(),a("br"),a("span",{staticClass:"text-secondary"},[t._v(" "+t._s(e.item.account.email))]),t._v(" "),a("br")])]):t._e()])]}},{key:"cell(phone)",fn:function(e){return[e.item.account?a("div",[e.item.account.phone?a("span",[t._v(" "+t._s(e.item.account.phone)+" ")]):t._e()]):t._e()]}},{key:"cell(gender)",fn:function(e){return[e.item.account?a("div",["P"==e.item.account.gender?a("span",[t._v(" "+t._s(t.$t("user-management.female"))+" ")]):t._e(),"L"==e.item.account.gender?a("span",[t._v(" "+t._s(t.$t("user-management.male"))+" ")]):t._e()]):t._e()]}},{key:"cell(is_subscribe)",fn:function(e){return[e.item.is_subscribe?a("div",[a("span",{staticClass:"badge badge-success font-size-12 px-2 mb-1  rounded"},[t._v(" "+t._s(t.$t("user-management.subscribe"))+" ")]),t._v(" "),a("br"),a("span",{staticClass:"text-secondary badge badge-soft-danger p-1 px-2 font-size-11 mb-1 rounded"},[t._v(" "+t._s(t.$t("user-management.expired"))+" : "+t._s(e.item.subscription_expire_date)+" ")])]):t._e(),e.item.is_trial&&!e.item.is_subscribe?a("div",[a("span",{staticClass:"badge badge-info font-size-12 px-2 mb-1 rounded"},[t._v(" "+t._s(t.$t("user-management.trial"))+" ")]),a("br"),a("span",{staticClass:"text-secondary badge badge-soft-danger p-1 px-2 font-size-11 mb-1 rounded"},[t._v(" "+t._s(t.$t("user-management.expired"))+" : "+t._s(e.item.trial_expire_date)+" ")])]):t._e(),e.item.is_trial||e.item.is_subscribe?t._e():a("span",{},[t._v(" - ")])]}},{key:"cell(actions)",fn:function(e){return[a("b-dropdown",{staticClass:"card-drop",attrs:{variant:"white",right:"","toggle-class":"p-0"},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("b-button",{staticClass:"btn btn-sm border",attrs:{variant:"primary"}},[t._v(" "+t._s(t.$t("all.more"))+" "),a("i",{staticClass:"mdi mdi-dots-vertical ml-0"})])]},proxy:!0}],null,!0)},[a("b-dropdown-item",[a("router-link",{staticClass:"text-info",attrs:{to:{name:"customer-management-detail",params:{id:e.item.id_customer}}}},[a("span",{staticClass:"btn-block"},[a("i",{staticClass:"bx bx-show mr-1"}),t._v(" "+t._s(t.$t("button.view"))+" ")])])],1),a("b-dropdown-item",[e.item.is_banned?t._e():a("span",{staticClass:" text-danger btn-block",attrs:{title:"banned"},on:{click:function(s){return t.bannedCustomers(e.item.id_customer)}}},[a("i",{staticClass:"fas fa-times px-0 mr-1"}),t._v(" "+t._s(t.$t("button.baned"))+" ")]),e.item.is_banned?a("span",{staticClass:"mr-1 btn-block",attrs:{title:"unbanned"},on:{click:function(s){return t.unbannedCustomers(e.item.id_customer)}}},[a("i",{staticClass:"fas fa-check px-0 mr-1"}),t._v(" "+t._s(t.$t("button.unbaned"))+" ")]):t._e()]),a("b-modal",{ref:"ref-modal-change-pass",attrs:{id:"modal-change-password"+e.item.id_admin,centered:"",title:t.$t("button.update.text"),"title-class":"font-18","ok-title":t.$t("button.update.text"),"cancel-title":t.$t("button.cancel.text")},scopedSlots:t._u([{key:"modal-footer",fn:function(s){var n=s.cancel;return[a("b-button",{attrs:{size:"md",variant:"danger"},on:{click:function(t){return n()}}},[t._v(" "+t._s(t.$t("button.cancel.text"))+" ")]),a("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(s){return t.updatePassword(s,e.item.id_admin)}}},[t._v(" "+t._s(t.$t("button.save.text"))+" ")])]}}],null,!0)},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"validationCustom01"}},[t._v(t._s(t.$t("user-management.email")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.item.email,expression:"row.item.email"}],staticClass:"form-control bg-light",attrs:{type:"email",readonly:""},domProps:{value:e.item.email},on:{input:function(s){s.target.composing||t.$set(e.item,"email",s.target.value)}}})])]),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"validationCustom01"}},[t._v(t._s(t.$t("user-management.new-password")))]),a("div",{staticClass:"input-group"},["checkbox"===(t.show.new?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.pass.new_password,expression:"form.pass.new_password"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.$v.form.pass.new_password.$error},attrs:{placeholder:"*******",type:"checkbox"},domProps:{checked:Array.isArray(t.form.pass.new_password)?t._i(t.form.pass.new_password,null)>-1:t.form.pass.new_password},on:{change:function(e){var s=t.form.pass.new_password,a=e.target,n=!!a.checked;if(Array.isArray(s)){var o=null,i=t._i(s,o);a.checked?i<0&&t.$set(t.form.pass,"new_password",s.concat([o])):i>-1&&t.$set(t.form.pass,"new_password",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.form.pass,"new_password",n)}}}):"radio"===(t.show.new?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.pass.new_password,expression:"form.pass.new_password"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.$v.form.pass.new_password.$error},attrs:{placeholder:"*******",type:"radio"},domProps:{checked:t._q(t.form.pass.new_password,null)},on:{change:function(e){return t.$set(t.form.pass,"new_password",null)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.pass.new_password,expression:"form.pass.new_password"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.$v.form.pass.new_password.$error},attrs:{placeholder:"*******",type:t.show.new?"text":"password"},domProps:{value:t.form.pass.new_password},on:{input:function(e){e.target.composing||t.$set(t.form.pass,"new_password",e.target.value)}}}),a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[t.show.new?a("div",[a("i",{staticClass:"fas fa-eye-slash",on:{click:function(e){t.show.new=!1}}})]):a("div",[a("i",{staticClass:"fas fa-eye",on:{click:function(e){t.show.new=!0}}})])])]),t.submitted&&t.$v.form.pass.new_password.$error?a("div",{staticClass:"invalid-feedback"},[t.$v.form.pass.new_password.required?t._e():a("span",[t._v(t._s(t.$t("form.error.text")))])]):t._e()])])]),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"validationCustom01"}},[t._v(t._s(t.$t("user-management.confirm-password")))]),a("div",{staticClass:"input-group"},["checkbox"===(t.show.conf?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.pass.confirm_password,expression:"form.pass.confirm_password"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.$v.form.pass.confirm_password.$error},attrs:{placeholder:"*******",type:"checkbox"},domProps:{checked:Array.isArray(t.form.pass.confirm_password)?t._i(t.form.pass.confirm_password,null)>-1:t.form.pass.confirm_password},on:{change:function(e){var s=t.form.pass.confirm_password,a=e.target,n=!!a.checked;if(Array.isArray(s)){var o=null,i=t._i(s,o);a.checked?i<0&&t.$set(t.form.pass,"confirm_password",s.concat([o])):i>-1&&t.$set(t.form.pass,"confirm_password",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.form.pass,"confirm_password",n)}}}):"radio"===(t.show.conf?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.pass.confirm_password,expression:"form.pass.confirm_password"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.$v.form.pass.confirm_password.$error},attrs:{placeholder:"*******",type:"radio"},domProps:{checked:t._q(t.form.pass.confirm_password,null)},on:{change:function(e){return t.$set(t.form.pass,"confirm_password",null)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.pass.confirm_password,expression:"form.pass.confirm_password"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.$v.form.pass.confirm_password.$error},attrs:{placeholder:"*******",type:t.show.conf?"text":"password"},domProps:{value:t.form.pass.confirm_password},on:{input:function(e){e.target.composing||t.$set(t.form.pass,"confirm_password",e.target.value)}}}),a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[t.show.conf?a("div",[a("i",{staticClass:"fas fa-eye-slash",on:{click:function(e){t.show.conf=!1}}})]):a("div",[a("i",{staticClass:"fas fa-eye",on:{click:function(e){t.show.conf=!0}}})])])]),t.submitted&&t.$v.form.pass.confirm_password.$error?a("div",{staticClass:"invalid-feedback"},[t.$v.form.pass.confirm_password.required?t._e():a("span",[t._v(t._s(t.$t("form.error.text")))]),!t.$v.form.pass.confirm_password.sameAsPassword&&t.$v.form.pass.confirm_password.required?a("span",[t._v(t._s(t.$t("form.error.match")))]):t._e()]):t._e()])])])])]),a("b-dropdown-item",[a("span",{staticClass:"text-danger btn-block",on:{click:function(s){return t.deleteCustomers(e.item.id_customer)}}},[a("i",{staticClass:"bx bx-trash text-danger mr-1"}),t._v(" "+t._s(t.$t("button.hapus.text"))+" ")])])],1)]}}],null,!1,3079540717)})],1),t.rows>10?a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 text-left"},[a("div",{staticClass:"text-muted float-left"},[t._v(" "+t._s(t.$t("table.show-label"))+" "),a("b",[t._v(t._s(t.perPage)+" ")]),t._v(t._s(t.$t("table.entri-label"))+" ")])]),a("div",{staticClass:"col-6 text-right"},[a("div",{staticClass:"dataTables_paginate paging_simple_numbers float-right"},[a("ul",{staticClass:"pagination pagination-rounded mb-0"},[a("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])])]):t._e()]):t._e()])])])],1)},n=[],o=(s("a4d3"),s("e01a"),s("4160"),s("159b"),s("3d20")),i=s.n(o),r=s("444f"),c=s("2579"),l=s("c2a4"),d=s("fff5"),u=s("973b"),m=(s("86b6"),s("c1df")),p=s.n(m),f={page:{meta:[{name:"description",content:l.description}]},components:{Layout:r["a"],PageHeader:c["a"]},data:function(){return{urlImage:"http://secureme.api.xyz/storage/avatar/",user_type:"",title:this.$t("user-management.customer-management"),items:[{text:this.$t("menuitems.dashboards.text"),href:"#"},{text:this.$t("user-management.customer-management"),active:!0}],loading:!1,tableData:[],totalRows:1,currentPage:1,perPage:10,pageOptions:[10,25,50,100],filter:null,filterOn:[],sortDesc:!1,selected:[],selectAll:!1,fields:[{key:"id_customer",thClass:"d-none",tdClass:"d-none"},{key:"bulk",thStyle:{width:"2%"},label:"#"},{key:"customer",sortable:!0,label:this.$t("user-management.customer")},{key:"phone",sortable:!0,label:this.$t("user-management.phone")},{key:"gender",sortable:!0,label:this.$t("user-management.gender")},{key:"is_subscribe",sortable:!0,label:this.$t("user-management.subscribe")},{key:"avatar",thClass:"d-none",tdClass:"d-none"},{key:"actions",class:"text-center",label:this.$t("user-management.action")}],form:{user:{username:"",email:"",password:"",active_until:"",user_type:"",is_active:0},pass:{new_password:"",confirm_password:""}},show:{new:!1,conf:!1},submitted:!1}},computed:{rows:function(){return this.tableData.length}},methods:{select:function(){if(this.selected=[],!this.selectAll)for(var t in this.tableData)this.selected.push(this.tableData[t].id_customer)},list:function(){var t=this;u["a"].getProfile().then((function(e){t.user_type=e.data.data.admin.role})).catch((function(e){t.message=e.response.data.data}))},getCustomer:function(){var t=this;this.loading=!0,d["a"].getAllCustomer().then((function(e){t.tableData=[],console.log(e.data.data),e.data.data.forEach((function(e){var s={id_customer:e.id_customer,account:e.account,id_package:e.id_package,is_subscribe:e.is_subscribe,is_pay:e.is_pay,is_banned:e.is_banned,is_trial:e.is_trial,subscription_expire_date:t.formatDate(e.subscription_expire_date),trial_expire_date:t.formatDate(e.trial_expire_date),device_name:e.device_name,device_token:e.device_token,created_at:t.formatDate(e.created_at),updated_at:t.formatDate(e.updated_at)};t.tableData.push(s),t.loading=!1}))})).catch((function(e){console.log(e),t.loading=!1}))},getCustomerUpdate:function(){var t=this;d["a"].getAllCustomer().then((function(e){t.tableData=[],console.log(e.data.data),e.data.data.forEach((function(e){var s={id_customer:e.id_customer,account:e.account,id_package:e.id_package,is_subscribe:e.is_subscribe,is_pay:e.is_pay,is_banned:e.is_banned,is_trial:e.is_trial,subscription_expire_date:t.formatDate(e.subscription_expire_date),trial_expire_date:t.formatDate(e.trial_expire_date),device_name:e.device_name,device_token:e.device_token,created_at:t.formatDate(e.created_at),updated_at:t.formatDate(e.updated_at)};t.tableData.push(s),t.loading=!1}))})).catch((function(e){console.log(e),t.loading=!1}))},deleteCustomers:function(t){var e=this;i.a.fire({title:this.$t("button.delete.modal.confirmText[0]"),text:this.$t("button.delete.modal.confirmText[1]"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",cancelButtonText:this.$t("button.cancel.text"),confirmButtonText:this.$t("button.delete.text")}).then((function(s){s.isConfirmed&&d["a"].deleteCustomer(t).then((function(t){e.getCustomerUpdate(),i.a.fire({position:"top-end",icon:"success",title:t.data.message,showConfirmButton:!1,timer:1500})})).catch((function(t){console.log(t)}))}))},bannedCustomers:function(t){var e=this;i.a.fire({title:this.$t("button.banned.modal.confirmText[0]"),text:this.$t("button.banned.modal.confirmText[1]"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",cancelButtonText:this.$t("button.cancel.text"),confirmButtonText:this.$t("button.banned.text")}).then((function(s){s.isConfirmed&&d["a"].bannedCustomer(t).then((function(t){e.getCustomerUpdate(),i.a.fire({position:"top-end",icon:"success",title:t.data.message,showConfirmButton:!1,timer:1500})})).catch((function(t){console.log(t)}))}))},unbannedCustomers:function(t){var e=this;i.a.fire({title:this.$t("button.unbanned.modal.confirmText[0]"),text:this.$t("button.unbanned.modal.confirmText[1]"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",cancelButtonText:this.$t("button.cancel.text"),confirmButtonText:this.$t("button.unbanned.text")}).then((function(s){s.isConfirmed&&d["a"].unbannedCustomer(t).then((function(t){e.getCustomerUpdate(),i.a.fire({position:"top-end",icon:"success",title:t.data.message,showConfirmButton:!1,timer:1500})})).catch((function(t){console.log(t)}))}))},bulkAction:function(){var t=this;i.a.fire({title:this.$t("button.delete.modal.confirmText[0]"),text:this.$t("button.delete.modal.confirmText[1]"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",cancelButtonText:this.$t("button.cancel.text"),confirmButtonText:this.$t("button.delete.text")}).then((function(e){if(e.isConfirmed){var s=t.selected;d["a"].bulkActionCustomer(s).then((function(e){t.selected=[],t.getCustomerUpdate(),i.a.fire({position:"top-end",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500})})).catch((function(t){console.log(t)}))}}))},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},onDelete:function(t){console.log("delete data:",t)},onView:function(t){console.log("details data:",t)},perPageSelect:function(t){this.perPage=t,this.$refs.dropdown.hide()},formatDate:function(t){return p()(t).format("YYYY-MM-DD")}},beforeMount:function(){this.list()},mounted:function(){var t=this;window.Echo.channel("notif").listen("NotifCreated",(function(e){console.log("Berhasil Listen",e),t.getCustomerUpdate()})),this.totalRows=this.items.length,this.getCustomer()}},b=f,_=(s("543b"),s("2877")),v=Object(_["a"])(b,a,n,!1,null,"c5cff762",null);e["default"]=v.exports},fff5:function(t,e,s){"use strict";var a=s("d4ec"),n=s("bee2"),o=s("bc3a"),i=s.n(o),r=s("6808"),c="http://secureme.api.xyz/api/",l=function(){function t(){Object(a["a"])(this,t)}return Object(n["a"])(t,[{key:"getAllCustomer",value:function(){return i.a.get(c+"customer",{headers:Object(r["a"])()})}},{key:"getDetailCustomer",value:function(t){return i.a.get(c+"customer/"+t,{headers:Object(r["a"])()})}},{key:"deleteCustomer",value:function(t){return i.a.delete(c+"customer/"+t,{headers:Object(r["a"])()})}},{key:"bulkActionCustomer",value:function(t){return i.a.post(c+"customer/bulk-delete",t,{headers:Object(r["a"])()})}},{key:"bannedCustomer",value:function(t){return i.a.get(c+"customer/banned/"+t,{headers:Object(r["a"])()})}},{key:"unbannedCustomer",value:function(t){return i.a.get(c+"customer/unbanned/"+t,{headers:Object(r["a"])()})}}]),t}();e["a"]=new l}}]);
//# sourceMappingURL=chunk-c748aa40.46fadd69.js.map