(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d5f40ca"],{3494:function(t,e,a){"use strict";var s=a("a2dd"),n=a.n(s);n.a},a2dd:function(t,e,a){},d189:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Layout",[s("PageHeader",{attrs:{title:t.title,items:t.items}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"card"},[t.loading?s("div",{staticClass:"card-body"},[s("div",{staticClass:"row mt-5 mb-5 pb-4 mx-auto"},[s("div",{staticClass:"col-12 p-5 m-4 text-center"},[t.loading?s("div",{staticClass:"spinner-border text-secondary",attrs:{role:"status"}},[s("span",{staticClass:"sr-only"},[t._v("Loading..")])]):t._e()])])]):t._e(),t.tableData[0]||t.loading?t._e():s("div",{staticClass:"card-body"},[s("div",{staticClass:"row  mt-5 mb-5 pb-4 mx-auto"},[s("div",{staticClass:"col-12  p-5 my-5 text-center"},[s("span",{staticClass:"text-secondary"},[t._v(t._s(t.$t("all.dnf")))])])])]),t.tableData[0]&&!t.loading?s("div",{staticClass:"card-body"},[s("div",{staticClass:"row mb-0"},[s("div",{staticClass:"col-5 col-xl-7"},[s("div",{},[s("b-dropdown",{staticClass:"btn-group mr-2 mb-2 mb-sm-0 border",attrs:{variant:"white"}},[s("template",{slot:"button-content"},[t._v(" "+t._s(t.$t("table.show-label"))+" "),s("i",{staticClass:"mdi mdi-chevron-down ml-2"})]),t._l(t.pageOptions,(function(e){return s("span",{key:e},[s("button",{staticClass:"dropdown-item",on:{click:function(a){return t.perPageSelect(e)}}},[e==t.perPage?s("span",{staticClass:"text-success"},[s("b",[t._v(" "+t._s(e)+" ")])]):s("span",[t._v(t._s(e))])])])}))],2),t.selected[0]?s("b-dropdown",{staticClass:"btn-group mr-2 mb-2 mb-sm-0 border",attrs:{variant:"white"}},["su"==t.user_type||"adm"==t.user_type?s("template",{slot:"button-content"},[t._v(" "+t._s(t.$t("button.bulk-action"))+" "),s("i",{staticClass:"mdi mdi-chevron-down ml-2"})]):t._e(),s("button",{staticClass:"dropdown-item",on:{click:function(e){return t.bulkAction()}}},[t._v(t._s(t.$t("button.hapus.text")))])],2):t._e()],1)]),s("div",{staticClass:"col-4 col-xl-3"}),s("div",{staticClass:"col-3 col-xl-2"},[s("div",{staticClass:"form-group has-search"},[s("span",{staticClass:"bx bx-search-alt search-icon form-control-feedback"}),s("b-form-input",{staticClass:"form-control",attrs:{type:"search",placeholder:t.$t("navbar.search.text")},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)])]),s("div",{staticClass:"table-responsive mb-0"},[s("b-table",{attrs:{items:t.tableData,fields:t.fields,bordered:"",striped:"",responsive:"sm","per-page":t.perPage,"current-page":t.currentPage,"sort-desc":t.sortDesc,filter:t.filter,"filter-included-fields":t.filterOn},on:{"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"head(bulk)",fn:function(){return[s("b-form-checkbox",{staticClass:"text-center mt-0",on:{change:t.select},model:{value:t.selectAll,callback:function(e){t.selectAll=e},expression:"selectAll"}})]},proxy:!0},{key:"cell(bulk)",fn:function(e){return[s("b-form-checkbox",{staticClass:"text-center mt-2",attrs:{value:e.item.id_customer},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})]}},{key:"cell(customer)",fn:function(e){return[s("div",{staticClass:"col-sm-12"},[s("div",{staticClass:"media"},["default_pict.png"==e.item.avatar?s("img",{staticClass:"mr-3 rounded-circle avatar-sm",attrs:{src:a("4b9b"),alt:"user-pic"}}):s("img",{staticClass:"mr-3 rounded-circle avatar-sm",attrs:{src:t.urlImage+e.item.avatar,alt:"user-pic"}}),s("div",{staticClass:"media-body"},[t._v(" "+t._s(e.item.name)+" "),e.item.is_banned?s("span",{staticClass:"text-danger ml-1",attrs:{title:"is banned"}},[s("i",{staticClass:"fas fa-times px-0"})]):t._e(),s("br"),s("span",{staticClass:"text-secondary"},[t._v(" "+t._s(e.item.email))]),t._v(" "),s("br")])])])]}},{key:"cell(gender)",fn:function(e){return["P"==e.item.gender?s("span",[t._v(" "+t._s(t.$t("user-management.female"))+" ")]):t._e(),"L"==e.item.gender?s("span",[t._v(" "+t._s(t.$t("user-management.male"))+" ")]):t._e()]}},{key:"cell(is_subscribe)",fn:function(e){return[e.item.is_subscribe?s("div",[s("span",{staticClass:"badge badge-success font-size-12 px-2 mb-1  rounded"},[t._v(" "+t._s(t.$t("user-management.subscribe"))+" ")]),t._v(" "),s("br"),s("span",{staticClass:"text-secondary badge badge-soft-danger p-1 px-2 font-size-11 mb-1 rounded"},[t._v(" "+t._s(t.$t("user-management.expired"))+" : "+t._s(e.item.subscription_expire_date)+" ")])]):t._e(),e.item.is_trial&&!e.item.is_subscribe?s("div",[s("span",{staticClass:"badge badge-info font-size-12 px-2 mb-1 rounded"},[t._v(" "+t._s(t.$t("user-management.trial"))+" ")]),s("br"),s("span",{staticClass:"text-secondary badge badge-soft-danger p-1 px-2 font-size-11 mb-1 rounded"},[t._v(" "+t._s(t.$t("user-management.expired"))+" : "+t._s(e.item.trial_expire_date)+" ")])]):t._e(),e.item.is_trial||e.item.is_subscribe?t._e():s("span",{},[t._v(" - ")])]}},{key:"cell(actions)",fn:function(e){return[s("router-link",{staticClass:"mr-1",attrs:{to:{name:"customer-management-detail",params:{id:e.item.id_customer}}}},[s("b-button",{staticClass:"btn btn-sm",attrs:{variant:"info"}},[t._v(t._s(t.$t("button.view")))])],1),e.item.is_banned?t._e():s("b-button",{staticClass:"btn btn-sm mr-1",attrs:{variant:"danger",title:"banned"},on:{click:function(a){return t.bannedCustomers(e.item.id_customer)}}},[s("i",{staticClass:"fas fa-times px-0"})]),e.item.is_banned?s("b-button",{staticClass:"btn btn-sm mr-1",attrs:{variant:"success",title:"unbanned"},on:{click:function(a){return t.unbannedCustomers(e.item.id_customer)}}},[s("i",{staticClass:"fas fa-check px-0"})]):t._e(),"su"==t.user_type||"adm"==t.user_type?s("b-button",{staticClass:"btn btn-sm",attrs:{variant:"danger"},on:{click:function(a){return t.deleteCustomers(e.item.id_customer)}}},[s("i",{staticClass:"bx bx-trash"})]):t._e()]}}],null,!1,1686582065)})],1),t.rows>10?s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 text-left"},[s("div",{staticClass:"text-muted float-left"},[t._v(" "+t._s(t.$t("table.show-label"))+" "),s("b",[t._v(t._s(t.perPage)+" ")]),t._v(t._s(t.$t("table.entri-label"))+" ")])]),s("div",{staticClass:"col-6 text-right"},[s("div",{staticClass:"dataTables_paginate paging_simple_numbers float-right"},[s("ul",{staticClass:"pagination pagination-rounded mb-0"},[s("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])])]):t._e()]):t._e()])])])],1)},n=[],i=(a("a4d3"),a("e01a"),a("4160"),a("b0c0"),a("159b"),a("3d20")),o=a.n(i),r=a("444f"),c=a("2579"),l=a("c2a4"),u=a("fff5"),d=a("973b"),m=(a("86b6"),a("c1df")),b=a.n(m),f={page:{meta:[{name:"description",content:l.description}]},components:{Layout:r["a"],PageHeader:c["a"]},data:function(){return{urlImage:"http://localhost:8003/storage/avatar/",user_type:"",title:this.$t("user-management.customer-management"),items:[{text:this.$t("menuitems.dashboards.text"),href:"#"},{text:this.$t("user-management.customer-management"),active:!0}],loading:!1,tableData:[],totalRows:1,currentPage:1,perPage:10,pageOptions:[10,25,50,100],filter:null,filterOn:[],sortDesc:!1,selected:[],selectAll:!1,fields:[{key:"id_customer",thClass:"d-none",tdClass:"d-none"},{key:"bulk",thStyle:{width:"2%"},label:"#"},{key:"customer",sortable:!0,label:this.$t("user-management.customer")},{key:"phone",sortable:!0,label:this.$t("user-management.phone")},{key:"gender",sortable:!0,label:this.$t("user-management.gender")},{key:"is_subscribe",sortable:!0,label:this.$t("user-management.subscribe")},{key:"avatar",thClass:"d-none",tdClass:"d-none"},{key:"actions",class:"text-center",label:this.$t("user-management.action")}],form:{user:{username:"",email:"",password:"",active_until:"",user_type:"",is_active:0},pass:{new_password:"",confirm_password:""}},show:{new:!1,conf:!1},submitted:!1}},computed:{rows:function(){return this.tableData.length}},methods:{select:function(){if(this.selected=[],!this.selectAll)for(var t in this.tableData)this.selected.push(this.tableData[t].id_customer)},list:function(){var t=this;d["a"].getProfile().then((function(e){t.user_type=e.data.data.admin.role})).catch((function(e){t.message=e.response.data.data}))},getCustomer:function(){var t=this;this.loading=!0,u["a"].getAllCustomer().then((function(e){t.tableData=[],e.data.data.forEach((function(e){var a={id_customer:e.id_customer,name:e.account.name,phone:e.account.phone,gender:e.account.gender,email:e.account.email,email_verified_at:e.account.email_verified_at,avatar:e.account.profile_pict,id_package:e.id_package,is_subscribe:e.is_subscribe,is_pay:e.is_pay,is_banned:e.is_banned,is_trial:e.is_trial,subscription_expire_date:t.formatDate(e.subscription_expire_date),trial_expire_date:t.formatDate(e.trial_expire_date),device_name:e.device_name,device_token:e.device_token,created_at:t.formatDate(e.created_at),updated_at:t.formatDate(e.updated_at)};t.tableData.push(a),t.loading=!1}))})).catch((function(e){console.log(e),t.loading=!1}))},getCustomerUpdate:function(){var t=this;u["a"].getAllCustomer().then((function(e){t.tableData=[],e.data.data.forEach((function(e){var a={id_customer:e.id_customer,name:e.account.name,phone:e.account.phone,gender:e.account.gender,email:e.account.email,email_verified_at:e.account.email_verified_at,avatar:e.account.profile_pict,id_package:e.id_package,is_subscribe:e.is_subscribe,is_pay:e.is_pay,is_banned:e.is_banned,is_trial:e.is_trial,subscription_expire_date:t.formatDate(e.subscription_expire_date),trial_expire_date:t.formatDate(e.trial_expire_date),device_name:e.device_name,device_token:e.device_token,created_at:t.formatDate(e.created_at),updated_at:t.formatDate(e.updated_at)};t.tableData.push(a),t.loading=!1}))})).catch((function(e){console.log(e),t.loading=!1}))},deleteCustomers:function(t){var e=this;o.a.fire({title:this.$t("button.delete.modal.confirmText[0]"),text:this.$t("button.delete.modal.confirmText[1]"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",cancelButtonText:this.$t("button.cancel.text"),confirmButtonText:this.$t("button.delete.text")}).then((function(a){a.isConfirmed&&u["a"].deleteCustomer(t).then((function(t){e.getCustomerUpdate(),o.a.fire({position:"top-end",icon:"success",title:t.data.message,showConfirmButton:!1,timer:1500})})).catch((function(t){console.log(t)}))}))},bannedCustomers:function(t){var e=this;o.a.fire({title:this.$t("button.banned.modal.confirmText[0]"),text:this.$t("button.banned.modal.confirmText[1]"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",cancelButtonText:this.$t("button.cancel.text"),confirmButtonText:this.$t("button.banned.text")}).then((function(a){a.isConfirmed&&u["a"].bannedCustomer(t).then((function(t){e.getCustomerUpdate(),o.a.fire({position:"top-end",icon:"success",title:t.data.message,showConfirmButton:!1,timer:1500})})).catch((function(t){console.log(t)}))}))},unbannedCustomers:function(t){var e=this;o.a.fire({title:this.$t("button.unbanned.modal.confirmText[0]"),text:this.$t("button.unbanned.modal.confirmText[1]"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",cancelButtonText:this.$t("button.cancel.text"),confirmButtonText:this.$t("button.unbanned.text")}).then((function(a){a.isConfirmed&&u["a"].unbannedCustomer(t).then((function(t){e.getCustomerUpdate(),o.a.fire({position:"top-end",icon:"success",title:t.data.message,showConfirmButton:!1,timer:1500})})).catch((function(t){console.log(t)}))}))},bulkAction:function(){var t=this;o.a.fire({title:this.$t("button.delete.modal.confirmText[0]"),text:this.$t("button.delete.modal.confirmText[1]"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",cancelButtonText:this.$t("button.cancel.text"),confirmButtonText:this.$t("button.delete.text")}).then((function(e){if(e.isConfirmed){var a=t.selected;u["a"].bulkActionCustomer(a).then((function(e){t.selected=[],t.getCustomerUpdate(),o.a.fire({position:"top-end",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500})})).catch((function(t){console.log(t)}))}}))},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},onDelete:function(t){console.log("delete data:",t)},onView:function(t){console.log("details data:",t)},perPageSelect:function(t){this.perPage=t,this.$refs.dropdown.hide()},formatDate:function(t){return b()(t).format("YYYY-MM-DD")}},beforeMount:function(){this.list()},mounted:function(){var t=this;window.Echo.channel("notif").listen("NotifCreated",(function(e){console.log("Berhasil Listen",e),t.getCustomerUpdate()})),this.totalRows=this.items.length,this.getCustomer()}},p=f,_=(a("3494"),a("2877")),h=Object(_["a"])(p,s,n,!1,null,"f321db72",null);e["default"]=h.exports},fff5:function(t,e,a){"use strict";var s=a("d4ec"),n=a("bee2"),i=a("bc3a"),o=a.n(i),r=a("6808"),c="http://localhost:8003/api/",l=function(){function t(){Object(s["a"])(this,t)}return Object(n["a"])(t,[{key:"getAllCustomer",value:function(){return o.a.get(c+"customer",{headers:Object(r["a"])()})}},{key:"getDetailCustomer",value:function(t){return o.a.get(c+"customer/"+t,{headers:Object(r["a"])()})}},{key:"deleteCustomer",value:function(t){return o.a.delete(c+"customer/"+t,{headers:Object(r["a"])()})}},{key:"bulkActionCustomer",value:function(t){return o.a.post(c+"customer/bulk-delete",t,{headers:Object(r["a"])()})}},{key:"bannedCustomer",value:function(t){return o.a.get(c+"customer/banned/"+t,{headers:Object(r["a"])()})}},{key:"unbannedCustomer",value:function(t){return o.a.get(c+"customer/unbanned/"+t,{headers:Object(r["a"])()})}}]),t}();e["a"]=new l}}]);
//# sourceMappingURL=chunk-2d5f40ca.6d3bbbb1.js.map